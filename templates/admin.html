{% extends 'base.html' %}

{% block title %} Admin & Settings {% endblock %}

{% block navlinks %}
<ul class="navbar-nav">
  <li class="nav-item">
  <a class="nav-link" href="/">Dashboard</a>
  </li>
  <li class="nav-item">
  <a class="nav-link" href="/settings">Settings</a>
  </li>
  <li class="nav-item">
  <a class="nav-link active" aria-current="page" href="/admin">Admin</a>
  </li>
</ul>
{% endblock %}

{% block content %}  
<div class="container">

<!-- Version Information Card -->
<div class="card shadow">
    <div class="card-header bg-info">
        <i class="fa-solid fa-server"></i>&nbsp; Version Information
    </div>
    <div class="card-body">
        <table class="table">
            <thead>
              <tr>
                <th scope="col">Component</th>
                <th scope="col">Version</th>
                <th scope="col">Build</th>
                <th scope="col">Info</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="row">Server Base</th>
                <td>{{ settings['versions']['server_base'] }}</td>
                <td>{{ settings['versions']['server_build'] }}</td>
                <td>Process Photos Server</td>
              </tr>
              <tr>
                <th scope="row">Sortphotos</th>
                <td>{{ settings['versions']['sortphotos'] }}</td>
                <td>{{ settings['versions']['sortphotos_commit'] }}</td>
                <td>Commit</td>
              </tr>
              <tr>
                <th scope="row">Exiftool</th>
                <td>{{ settings['versions']['exiftool'] }}</td>
                <td>{{ settings['versions']['exiftool_date'] }}</td>
                <td>Version used by Sortphotos</td>
              </tr>
            </tbody>
          </table>
    </div>
</div>
<br>

<!-- Reset Folders -->
<div class="card shadow">
    <div class="card-header bg-danger text-white">
      <i class="fa-solid fa-arrows-spin"></i>&nbsp; Reset Folders
    </div>
    <div class="card-body">
      <button type="button" class="btn btn-danger text-white w-100" data-bs-toggle="modal" data-bs-target="#resetFoldersModal" id="resetFoldersButton">
        <i class="fa-solid fa-triangle-exclamation"></i>&nbsp;
        Reset Folders Data
      </button>
      <br>
        <i>This will reset the folders.json, clearing all processed flags and reloading the directory structure from the originals folder.  This action is not reversible.</i>
    </div>
  </div>
<br>

<!-- Modal resetFoldersModal -->
<div class="modal fade" id="resetFoldersModal" tabindex="-1" aria-labelledby="resetFoldersModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="resetFoldersModalLabel">Reset Folders Confirmation</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Are you sure you want to reset your folders file and lose all of the processed flag status?  <br>
        <b>This action is not reversible.</b>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <a href="/admin/reset_folders" type="button" class="btn btn-danger">Yes I'm Sure.</a>
      </div>
    </div>
  </div>
</div>

<!-- System Information Card -->
<div class="card shadow">
    <div class="card-header bg-info">
        <i class="fas fa-info-circle"></i>&nbsp; System Information
    </div>
    <div class="card-body">
        <b>CPU Info</b><br>
        {% for line in cpuinfo %}
        {{ line }}<br>
        {% endfor %}
    </div>
</div>
<br>

<!-- Attributions and Credits -->
<div class="card shadow">
    <div class="card-header bg-info">
        <i class="fas fa-bullhorn"></i>&nbsp; Attributions & Credits
    </div>
    <div class="card card-body">
        <p>Web Application created by <a href="https://github.com/nebhead" target="blank">Ben Parmeter</a>, copyright 2025. Check out my other projects on <a href="https://github.com/nebhead" target="blank">GitHub.</a></p>
        <p><i>If you enjoy this software and feel the need to donate a cup of coffee, a frosty beer or a bottle of wine to the developer you can click <a href="https://paypal.me/benparmeter" target="blank">here.</a></i></p>
        <p><i>Of course, none of this project would be available without the wonderful and amazing folks below... </i></p><br>
        <ul class="list-group">
            <li class="list-group-item"><b>Bootstrap</b> - WebUI Based on Bootstrap 5.  Bootstrap is released under the MIT license and is copyright 2018 Twitter. (<a href="http://getbootstrap.com" target="blank">getbootstrap.com</a>)</li>
            <li class="list-group-item"><b>JQuery</b> - Required by Bootstrap. Copyright JS Foundation and other contributors. Released under MIT license. (<a href="https://jquery.org/license/" target="blank">jquery.org/license</a>)</li>
            <li class="list-group-item"><b>FontAwesome</b> - Amazing FREE Icons that I use throughout this project.  Copyright Font Awesome.  Released under the Font Awesome Free License. (<a href="https://fontawesome.com/" target="blank">fontawesome.com</a>)(<a href="https://github.com/FortAwesome/Font-Awesome" target="blank">github.com</a>)</li>
            <li class="list-group-item"><b>BootSwatch</b> - Bootstrap CSS styling.  Copyright 2012-2021 Thomas Park.  Licensed under MIT.  (<a href="https://bootswatch.com/" target="blank">https://bootswatch.com/</a>)</li>
            <li class="list-group-item"><b>SortPhotos</b> - SortPhotos is a Python script that organizes photos and videos into folders using date/time information from EXIF data. Copyright 2013, S. Andrew Ning. Licensed under MIT.  (<a href="https://github.com/andrewning/sortphotos" target="blank">https://github.com/andrewning/sortphotos</a>)</li>
            <li class="list-group-item"><b>Exiftool</b> - Exiftool is an excellent EXIF data scraping tool, used by SortPhotos. Copyright Phil Harvey. Licensed as Perl Licensing.  (<a href="https://exiftool.org/" target="blank">https://exiftool.org/</a>)</li>
        </ul>
    </div>
</div>

</div> <!-- End of Container -->

{% endblock %}

{% block scripts %}
<script>
  $(document).ready(function() {
    $('#resetFoldersButton').hover(function () {
        $(this).html('<i class="fa-solid fa-triangle-exclamation fa-beat" style="--fa-beat-scale: 2.0;"></i>&nbsp; Reset Folders Data');
    }, function() {
        $(this).html('<i class="fa-solid fa-triangle-exclamation"></i>&nbsp; Reset Folders Data');
    });
  });
</script>
{% endblock %}
